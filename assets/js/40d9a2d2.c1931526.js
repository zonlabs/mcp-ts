"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6301],{208(e,s,n){n.d(s,{U:()=>f});n(6540);var i=n(9197),t=n(712),r=n(408),o=n(7613),l=n(1735),c=n(5399),d=n(4848);const a="#d82c20",h="#f59e0b",x="#eab308",p="#10b981",j="#64748b",u="#4b5563",m="#D82C20",g="#336791",y={database:{Icon:i.nBS,defaultColor:a},sync:{Icon:i.BVQ,defaultColor:p},tools:{Icon:i.Ph,defaultColor:j},chart:{Icon:i.v$b,defaultColor:h},lock:{Icon:i.JhU,defaultColor:u},idea:{Icon:i.ZPX,defaultColor:x},search:{Icon:i.VxX,defaultColor:j},book:{Icon:i.hko,defaultColor:u},success:{Icon:i.cxC,defaultColor:p},warning:{Icon:i.Ddf,defaultColor:h},error:{Icon:i.ts_,defaultColor:a},rocket:{Icon:i.uoG,defaultColor:a},bolt:{Icon:i.lHQ,defaultColor:x},target:{Icon:i.RBv,defaultColor:a},filesystem:{Icon:r.UCm,defaultColor:x},memory:{Icon:o.KNe,defaultColor:j},redis:{Icon:t.mIs,defaultColor:m},postgres:{Icon:l.rj_,defaultColor:g},backends:{Icon:c.hsL,defaultColor:a}},f=({type:e,size:s=20,className:n,style:i,color:t})=>{const r=y[e];if(!r)return null;const{Icon:o,defaultColor:l}=r;return(0,d.jsx)(o,{size:s,className:n,style:{color:t||l,display:"inline-block",verticalAlign:"middle",marginRight:"8px",...i}})}},8963(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>x,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"storage-backends","title":"Storage Backends","description":"The library supports multiple storage backends for session persistence, allowing you to choose the best option for your deployment environment.","source":"@site/docs/storage-backends.md","sourceDirName":".","slug":"/storage-backends","permalink":"/mcp-ts/docs/storage-backends","draft":false,"unlisted":false,"editUrl":"https://github.com/zonlabs/mcp-redis/tree/main/docs/docs/storage-backends.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/mcp-ts/docs/installation"},"next":{"title":"Next.js Integration","permalink":"/mcp-ts/docs/nextjs"}}');var t=n(4848),r=n(8453),o=n(208);const l={sidebar_position:3},c="Storage Backends",d={},a=[{value:"<DocIcon></DocIcon> Available Backends",id:"-available-backends",level:2},{value:"<DocIcon></DocIcon> Redis (Production)",id:"-redis-production",level:3},{value:"<DocIcon></DocIcon> File System (Development)",id:"-file-system-development",level:3},{value:"<DocIcon></DocIcon> In-Memory (Testing)",id:"-in-memory-testing",level:3},{value:"<DocIcon></DocIcon> PostgreSQL (Coming Soon)",id:"-postgresql-coming-soon",level:3},{value:"<DocIcon></DocIcon> Automatic Backend Selection",id:"-automatic-backend-selection",level:2},{value:"<DocIcon></DocIcon> Custom Backend Implementation",id:"-custom-backend-implementation",level:2},{value:"<DocIcon></DocIcon> Backend Comparison",id:"-backend-comparison",level:2},{value:"<DocIcon></DocIcon> Session Data Structure",id:"-session-data-structure",level:2},{value:"<DocIcon></DocIcon> Best Practices",id:"-best-practices",level:2},{value:"Production Deployments",id:"production-deployments",level:3},{value:"Local Development",id:"local-development",level:3},{value:"Testing",id:"testing",level:3},{value:"Serverless (Vercel, AWS Lambda)",id:"serverless-vercel-aws-lambda",level:3},{value:"<DocIcon></DocIcon> Troubleshooting",id:"-troubleshooting",level:2},{value:"Redis Connection Failed",id:"redis-connection-failed",level:3},{value:"File Storage Not Persisting",id:"file-storage-not-persisting",level:3},{value:"Sessions Lost on Restart",id:"sessions-lost-on-restart",level:3},{value:"<DocIcon></DocIcon> Next Steps",id:"-next-steps",level:2}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"storage-backends",children:"Storage Backends"})}),"\n",(0,t.jsx)(s.p,{children:"The library supports multiple storage backends for session persistence, allowing you to choose the best option for your deployment environment."}),"\n",(0,t.jsxs)(s.h2,{id:"-available-backends",children:[(0,t.jsx)(o.U,{type:"backends",size:28})," Available Backends"]}),"\n",(0,t.jsxs)(s.h3,{id:"-redis-production",children:[(0,t.jsx)(o.U,{type:"redis",size:24})," Redis (Production)"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Recommended for production and serverless deployments."})}),"\n",(0,t.jsx)(s.p,{children:"Redis provides distributed, persistent storage with automatic TTL (Time To Live) management. Perfect for:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Production environments"}),"\n",(0,t.jsx)(s.li,{children:"Serverless deployments (Vercel, AWS Lambda)"}),"\n",(0,t.jsx)(s.li,{children:"Multi-instance applications"}),"\n",(0,t.jsx)(s.li,{children:"High-availability setups"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Configuration:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Explicit selection (optional)\nMCP_TS_STORAGE_TYPE=redis\n\n# Redis connection URL (required)\nREDIS_URL=redis://localhost:6379\n\n# Or for cloud Redis with TLS\nREDIS_URL=rediss://default:password@host.upstash.io:6379\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Features:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Automatic session expiration (12 hours TTL)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Atomic operations for data consistency"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Distributed storage across instances"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Production-ready scalability"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Usage:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"import { storage } from '@mcp-ts/redis/server';\n\n// Storage automatically uses Redis when REDIS_URL is set\nconst sessionId = storage.generateSessionId();\n\nawait storage.createSession({\n  sessionId,\n  identity: 'user-123',\n  serverUrl: 'https://mcp.example.com',\n  callbackUrl: 'https://app.com/callback',\n  transportType: 'sse',\n  active: true,\n  createdAt: Date.now(),\n});\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h3,{id:"-file-system-development",children:[(0,t.jsx)(o.U,{type:"filesystem",size:24})," File System (Development)"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Perfect for local development with persistent sessions across restarts."})}),"\n",(0,t.jsx)(s.p,{children:"File storage persists sessions to a JSON file on disk. Ideal for:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Local development"}),"\n",(0,t.jsx)(s.li,{children:"Single-instance deployments"}),"\n",(0,t.jsx)(s.li,{children:"Testing with persistent state"}),"\n",(0,t.jsx)(s.li,{children:"Environments without Redis"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Configuration:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Explicit selection (optional)\nMCP_TS_STORAGE_TYPE=file\n\n# File path for session storage (required)\nMCP_TS_STORAGE_FILE=./sessions.json\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Features:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Persistent across application restarts"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," No external dependencies"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Human-readable JSON format"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Automatic directory creation"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Usage:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"import { storage } from '@mcp-ts/redis/server';\n\n// Storage automatically uses File when MCP_TS_STORAGE_FILE is set\nconst sessions = await storage.getIdentitySessionsData('user-123');\nconsole.log('Stored sessions:', sessions);\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"File Format:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'[\n  {\n    "sessionId": "abc123",\n    "identity": "user-123",\n    "serverId": "server-1",\n    "serverName": "My MCP Server",\n    "serverUrl": "https://mcp.example.com",\n    "callbackUrl": "https://app.com/callback",\n    "transportType": "sse",\n    "active": true,\n    "createdAt": 1706234567890\n  }\n]\n'})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h3,{id:"-in-memory-testing",children:[(0,t.jsx)(o.U,{type:"memory",size:24})," In-Memory (Testing)"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Fast ephemeral storage, ideal for testing. Sessions are lost on restart."})}),"\n",(0,t.jsx)(s.p,{children:"In-memory storage keeps sessions in RAM. Best for:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Unit testing"}),"\n",(0,t.jsx)(s.li,{children:"Integration testing"}),"\n",(0,t.jsx)(s.li,{children:"Quick prototyping"}),"\n",(0,t.jsx)(s.li,{children:"Temporary sessions"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Configuration:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Explicit selection (optional)\nMCP_TS_STORAGE_TYPE=memory\n\n# No additional configuration needed\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Features:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Fastest performance"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," No external dependencies"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Zero configuration"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(o.U,{type:"warning",size:16})," Sessions lost on restart"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Usage:"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"import { storage } from '@mcp-ts/redis/server';\n\n// Storage uses in-memory by default if no other backend is configured\nawait storage.createSession({\n  sessionId: 'test-123',\n  identity: 'test-user',\n  serverUrl: 'https://test.example.com',\n  callbackUrl: 'https://test.com/callback',\n  transportType: 'sse',\n  active: true,\n  createdAt: Date.now(),\n});\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h3,{id:"-postgresql-coming-soon",children:[(0,t.jsx)(o.U,{type:"postgres",size:24})," PostgreSQL (Coming Soon)"]}),"\n",(0,t.jsx)(s.p,{children:"PostgreSQL support is planned for a future release, providing:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Relational data storage"}),"\n",(0,t.jsx)(s.li,{children:"Advanced querying capabilities"}),"\n",(0,t.jsx)(s.li,{children:"ACID compliance"}),"\n",(0,t.jsx)(s.li,{children:"Integration with existing databases"}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"-automatic-backend-selection",children:[(0,t.jsx)(o.U,{type:"sync",size:28})," Automatic Backend Selection"]}),"\n",(0,t.jsx)(s.p,{children:"The library automatically selects the appropriate storage backend using this priority:"}),"\n",(0,t.jsx)(s.mermaid,{value:"graph TD\n    A[Start] --\x3e B{MCP_TS_STORAGE_TYPE set?}\n    B --\x3e|Yes| C[Use specified backend]\n    B --\x3e|No| D{REDIS_URL present?}\n    D --\x3e|Yes| E[Use Redis]\n    D --\x3e|No| F{MCP_TS_STORAGE_FILE present?}\n    F --\x3e|Yes| G[Use File System]\n    F --\x3e|No| H[Use In-Memory Default]\n    \n    C --\x3e I[Storage Ready]\n    E --\x3e I\n    G --\x3e I\n    H --\x3e I"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Priority Order:"})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Explicit"}),": If ",(0,t.jsx)(s.code,{children:"MCP_TS_STORAGE_TYPE"})," is set, use that backend"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Auto-detect Redis"}),": If ",(0,t.jsx)(s.code,{children:"REDIS_URL"})," is present, use Redis"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Auto-detect File"}),": If ",(0,t.jsx)(s.code,{children:"MCP_TS_STORAGE_FILE"})," is present, use File"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Default"}),": Fall back to In-Memory storage"]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"-custom-backend-implementation",children:[(0,t.jsx)(o.U,{type:"tools",size:28})," Custom Backend Implementation"]}),"\n",(0,t.jsx)(s.p,{children:"You can use specific storage backends directly:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"import { \n  RedisStorageBackend,\n  MemoryStorageBackend,\n  FileStorageBackend \n} from '@mcp-ts/redis/server';\nimport { Redis } from 'ioredis';\n\n// Custom Redis instance\nconst redis = new Redis({\n  host: 'localhost',\n  port: 6379,\n  password: 'secret',\n});\nconst redisStorage = new RedisStorageBackend(redis);\n\n// Custom file path\nconst fileStorage = new FileStorageBackend({ \n  path: '/var/data/sessions.json' \n});\nawait fileStorage.init();\n\n// In-memory for testing\nconst memoryStorage = new MemoryStorageBackend();\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"-backend-comparison",children:[(0,t.jsx)(o.U,{type:"chart",size:28})," Backend Comparison"]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Feature"}),(0,t.jsxs)(s.th,{children:[(0,t.jsx)(o.U,{type:"redis",size:20})," Redis"]}),(0,t.jsxs)(s.th,{children:[(0,t.jsx)(o.U,{type:"filesystem",size:20})," File System"]}),(0,t.jsxs)(s.th,{children:[(0,t.jsx)(o.U,{type:"memory",size:20})," In-Memory"]})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Persistence"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Yes"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Yes"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"error",size:16})," No"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Distributed"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Yes"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"error",size:16})," No"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"error",size:16})," No"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Auto-Expiry"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Yes (TTL)"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"error",size:16})," No"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"error",size:16})," No"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Performance"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"bolt",size:16})," Fast"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"chart",size:16})," Medium"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"rocket",size:16})," Fastest"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Setup"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"tools",size:16})," Requires Redis"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"filesystem",size:16})," Built-in"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"target",size:16})," Built-in"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Serverless"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Yes"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"warning",size:16})," Limited"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Yes"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Production"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Recommended"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"warning",size:16})," Single-instance"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"error",size:16})," Not recommended"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Development"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Good"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Excellent"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Good"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Testing"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Good"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Good"]}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(o.U,{type:"success",size:16})," Excellent"]})]})]})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"-session-data-structure",children:[(0,t.jsx)(o.U,{type:"lock",size:28})," Session Data Structure"]}),"\n",(0,t.jsx)(s.p,{children:"All backends store the same session data structure:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"interface SessionData {\n  sessionId: string;\n  identity?: string;\n  serverId?: string;\n  serverName?: string;\n  serverUrl: string;\n  callbackUrl: string;\n  transportType: 'sse' | 'streamable_http';\n  active: boolean;\n  createdAt: number;\n  headers?: Record<string, string>;\n  // OAuth data\n  tokens?: OAuthTokens;\n  clientInformation?: OAuthClientInformation;\n  codeVerifier?: string;\n  clientId?: string;\n}\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"-best-practices",children:[(0,t.jsx)(o.U,{type:"idea",size:28})," Best Practices"]}),"\n",(0,t.jsx)(s.h3,{id:"production-deployments",children:"Production Deployments"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Use Redis for production\nMCP_TS_STORAGE_TYPE=redis\nREDIS_URL=rediss://user:pass@production-redis.example.com:6379\n"})}),"\n",(0,t.jsx)(s.h3,{id:"local-development",children:"Local Development"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Use File storage for development\nMCP_TS_STORAGE_TYPE=file\nMCP_TS_STORAGE_FILE=./dev-sessions.json\n"})}),"\n",(0,t.jsx)(s.h3,{id:"testing",children:"Testing"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Use in-memory for tests\nMCP_TS_STORAGE_TYPE=memory\n"})}),"\n",(0,t.jsx)(s.h3,{id:"serverless-vercel-aws-lambda",children:"Serverless (Vercel, AWS Lambda)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Use Redis with Upstash or similar\nREDIS_URL=rediss://default:token@serverless-redis.upstash.io:6379\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"-troubleshooting",children:[(0,t.jsx)(o.U,{type:"search",size:28})," Troubleshooting"]}),"\n",(0,t.jsx)(s.h3,{id:"redis-connection-failed",children:"Redis Connection Failed"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Verify Redis is running\nredis-cli ping  # Should return PONG\n\n# Check connection string\necho $REDIS_URL\n\n# Test with redis-cli\nredis-cli -u $REDIS_URL ping\n"})}),"\n",(0,t.jsx)(s.h3,{id:"file-storage-not-persisting",children:"File Storage Not Persisting"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Check file permissions\nls -la ./sessions.json\n\n# Verify path is writable\ntouch ./sessions.json\n\n# Check environment variable\necho $MCP_TS_STORAGE_FILE\n"})}),"\n",(0,t.jsx)(s.h3,{id:"sessions-lost-on-restart",children:"Sessions Lost on Restart"}),"\n",(0,t.jsx)(s.p,{children:"If you're using in-memory storage (default), sessions will be lost on restart. Switch to Redis or File storage for persistence:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Add to .env\nMCP_TS_STORAGE_TYPE=file\nMCP_TS_STORAGE_FILE=./sessions.json\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"-next-steps",children:[(0,t.jsx)(o.U,{type:"book",size:28})," Next Steps"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/mcp-ts/docs/installation",children:"Installation Guide"})," - Setup instructions"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/mcp-ts/docs/api-reference",children:"API Reference"})," - Complete API documentation"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/mcp-ts/docs/nextjs",children:"Next.js Integration"})," - Framework-specific guides"]}),"\n"]})]})}function x(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);