"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[627],{2854(n,e,t){t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"react-hook","title":"React Hook (useMcp)","description":"The useMcp hook provides a simple way to manage MCP connections in React applications.","source":"@site/docs/react-hook.md","sourceDirName":".","slug":"/react-hook","permalink":"/mcp-redis/docs/react-hook","draft":false,"unlisted":false,"editUrl":"https://github.com/ashen-dusk/mcp-redis/tree/main/docs/docs/react-hook.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Next.js Integration","permalink":"/mcp-redis/docs/nextjs"},"next":{"title":"API Reference","permalink":"/mcp-redis/docs/api-reference"}}');var s=t(4848),c=t(8453);const i={sidebar_position:4},r="React Hook (useMcp)",a={},l=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Return Values",id:"return-values",level:2},{value:"State",id:"state",level:3},{value:"Connection Methods",id:"connection-methods",level:3},{value:"Tool Operations",id:"tool-operations",level:3},{value:"Prompt Operations",id:"prompt-operations",level:3},{value:"Resource Operations",id:"resource-operations",level:3},{value:"Utility Methods",id:"utility-methods",level:3},{value:"Connection Object",id:"connection-object",level:2},{value:"Connection States",id:"connection-states",level:2},{value:"Event Handling",id:"event-handling",level:2},{value:"Examples",id:"examples",level:2},{value:"Connect and Call Tool",id:"connect-and-call-tool",level:3},{value:"Display Connection Status",id:"display-connection-status",level:3},{value:"Handle OAuth Redirect",id:"handle-oauth-redirect",level:3},{value:"TypeScript Types",id:"typescript-types",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"react-hook-usemcp",children:"React Hook (useMcp)"})}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"useMcp"})," hook provides a simple way to manage MCP connections in React applications."]}),"\n",(0,s.jsx)(e.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"import { useMcp } from '@mcp-ts/redis/client';\n\nfunction MyComponent() {\n  const { connections, connect, disconnect, status } = useMcp({\n    url: '/api/mcp',\n    userId: 'user-123',\n  });\n\n  return (\n    <div>\n      <p>Status: {status}</p>\n      {connections.map(conn => (\n        <div key={conn.sessionId}>\n          <h3>{conn.serverName}</h3>\n          <p>{conn.state}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"useMcp({\n  // Required: SSE endpoint URL\n  url: '/api/mcp',\n\n  // Required: User identifier\n  userId: 'user-123',\n\n  // Optional: Authentication token\n  authToken: 'your-auth-token',\n\n  // Optional: Auto-connect SSE on mount (default: true)\n  autoConnect: true,\n\n  // Optional: Auto-load sessions on mount (default: true)\n  autoInitialize: true,\n\n  // Optional: Connection event handler\n  onConnectionEvent: (event) => {\n    console.log('Event:', event);\n  },\n\n  // Optional: Debug log handler\n  onLog: (level, message, metadata) => {\n    console.log(`[${level}] ${message}`, metadata);\n  },\n})\n"})}),"\n",(0,s.jsx)(e.h2,{id:"return-values",children:"Return Values"}),"\n",(0,s.jsx)(e.h3,{id:"state",children:"State"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"const {\n  // Connection list\n  connections,        // Connection[] - All active connections\n  status,            // SSEStatus - SSE connection status\n  isInitializing,    // boolean - Loading initial sessions\n\n  // ... methods below\n} = useMcp({...});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"connection-methods",children:"Connection Methods"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"// Connect to an MCP server\nconst sessionId = await connect({\n  serverId: 'server-id',\n  serverName: 'My Server',\n  serverUrl: 'https://mcp.example.com',\n  callbackUrl: window.location.origin + '/callback',\n  transportType: 'sse',\n});\n\n// Disconnect from a server\nawait disconnect(sessionId);\n\n// Reload all sessions\nawait refresh();\n\n// Manually control SSE connection\nconnectSSE();\ndisconnectSSE();\n\n// Complete OAuth flow\nawait finishAuth(code, state);\n"})}),"\n",(0,s.jsx)(e.h3,{id:"tool-operations",children:"Tool Operations"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"// Call a tool\nconst result = await callTool(sessionId, 'tool_name', {\n  arg1: 'value',\n});\n\n// List available tools\nconst tools = await listTools(sessionId);\n"})}),"\n",(0,s.jsx)(e.h3,{id:"prompt-operations",children:"Prompt Operations"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"// List available prompts\nconst { prompts } = await listPrompts(sessionId);\n\n// Get a specific prompt\nconst prompt = await getPrompt(sessionId, 'prompt_name', {\n  arg1: 'value',\n});\n"})}),"\n",(0,s.jsx)(e.h3,{id:"resource-operations",children:"Resource Operations"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"// List available resources\nconst { resources } = await listResources(sessionId);\n\n// Read a specific resource\nconst resource = await readResource(sessionId, 'file:///path');\n"})}),"\n",(0,s.jsx)(e.h3,{id:"utility-methods",children:"Utility Methods"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"// Get connection by session ID\nconst conn = getConnection(sessionId);\n\n// Get connection by server ID\nconst conn = getConnectionByServerId(serverId);\n\n// Check if server is connected\nconst isConnected = isServerConnected(serverId);\n\n// Get tools for a session\nconst tools = getTools(sessionId);\n"})}),"\n",(0,s.jsx)(e.h2,{id:"connection-object",children:"Connection Object"}),"\n",(0,s.jsx)(e.p,{children:"Each connection has the following structure:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"interface Connection {\n  sessionId: string;\n  serverId: string;\n  serverName: string;\n  serverUrl: string;\n  state: McpConnectionState;\n  tools: ToolInfo[];\n  error?: string;\n  timestamp: number;\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"connection-states",children:"Connection States"}),"\n",(0,s.jsx)(e.p,{children:"Connections progress through these states:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"type McpConnectionState =\n  | 'DISCONNECTED'      // Not connected\n  | 'CONNECTING'        // Attempting to connect\n  | 'AUTHENTICATING'    // OAuth in progress\n  | 'AUTHENTICATED'     // OAuth complete\n  | 'DISCOVERING'       // Loading tools\n  | 'CONNECTED'         // Fully connected\n  | 'VALIDATING'        // Validating session\n  | 'RECONNECTING'      // Reconnecting\n  | 'FAILED';           // Connection failed\n"})}),"\n",(0,s.jsx)(e.h2,{id:"event-handling",children:"Event Handling"}),"\n",(0,s.jsx)(e.p,{children:"Handle connection events for custom logic:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"const { connections } = useMcp({\n  url: '/api/mcp',\n  userId: 'user-123',\n  onConnectionEvent: (event) => {\n    switch (event.type) {\n      case 'state_changed':\n        console.log('State:', event.state);\n        break;\n\n      case 'tools_discovered':\n        console.log('Tools:', event.tools);\n        break;\n\n      case 'auth_required':\n        // Redirect to OAuth\n        window.location.href = event.authUrl;\n        break;\n\n      case 'error':\n        console.error('Error:', event.error);\n        break;\n\n      case 'disconnected':\n        console.log('Disconnected:', event.reason);\n        break;\n    }\n  },\n});\n"})}),"\n",(0,s.jsx)(e.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(e.h3,{id:"connect-and-call-tool",children:"Connect and Call Tool"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"function ToolCaller() {\n  const { connections, connect, callTool } = useMcp({\n    url: '/api/mcp',\n    userId: 'user-123',\n  });\n\n  const handleConnect = async () => {\n    const sessionId = await connect({\n      serverId: 'weather-server',\n      serverName: 'Weather Server',\n      serverUrl: 'https://weather-mcp.example.com',\n      callbackUrl: window.location.origin + '/callback',\n    });\n\n    // Call a tool after connecting\n    const result = await callTool(sessionId, 'get_weather', {\n      location: 'San Francisco',\n    });\n\n    console.log('Weather:', result);\n  };\n\n  return <button onClick={handleConnect}>Get Weather</button>;\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"display-connection-status",children:"Display Connection Status"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"function ConnectionStatus() {\n  const { connections, status } = useMcp({\n    url: '/api/mcp',\n    userId: 'user-123',\n  });\n\n  return (\n    <div>\n      <p>SSE Status: {status}</p>\n\n      {connections.map(conn => (\n        <div key={conn.sessionId}>\n          <h3>{conn.serverName}</h3>\n          <div>\n            State: <span style={{\n              color: conn.state === 'CONNECTED' ? 'green' : 'orange'\n            }}>\n              {conn.state}\n            </span>\n          </div>\n\n          {conn.state === 'CONNECTED' && (\n            <p>Tools: {conn.tools.length}</p>\n          )}\n\n          {conn.error && (\n            <p style={{ color: 'red' }}>Error: {conn.error}</p>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"handle-oauth-redirect",children:"Handle OAuth Redirect"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"function McpWithAuth() {\n  const { connect } = useMcp({\n    url: '/api/mcp',\n    userId: 'user-123',\n    onConnectionEvent: (event) => {\n      if (event.type === 'auth_required') {\n        // Redirect to OAuth page\n        window.location.href = event.authUrl;\n      }\n    },\n  });\n\n  return (\n    <button onClick={() => connect({\n      serverId: 'protected-server',\n      serverName: 'Protected Server',\n      serverUrl: 'https://secure-mcp.example.com',\n      callbackUrl: window.location.origin + '/oauth/callback',\n    })}>\n      Connect (will redirect for auth)\n    </button>\n  );\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"typescript-types",children:"TypeScript Types"}),"\n",(0,s.jsx)(e.p,{children:"Import types for better type safety:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"import type {\n  McpConnectionState,\n  McpConnectionEvent,\n  ToolInfo,\n} from '@mcp-ts/redis/shared';\n\nimport type {\n  McpClient, // Return type of useMcp\n} from '@mcp-ts/redis/client';\n"})}),"\n",(0,s.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/mcp-redis/docs/api-reference",children:"API Reference"})," - Complete API documentation"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://github.com/ashen-dusk/mcp-redis/tree/main/examples",children:"Examples"})," - More practical examples"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8453(n,e,t){t.d(e,{R:()=>i,x:()=>r});var o=t(6540);const s={},c=o.createContext(s);function i(n){const e=o.useContext(c);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:i(n.components),o.createElement(c.Provider,{value:e},n.children)}}}]);