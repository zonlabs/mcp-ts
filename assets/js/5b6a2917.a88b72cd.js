"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8442],{3900(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"mcp-apps","title":"MCP Apps","description":"MCP Apps enable MCP servers to deliver interactive user interfaces to hosts. This standardized pattern allows servers to present visual information and gather complex user input beyond text and structured data.","source":"@site/docs/mcp-apps.md","sourceDirName":".","slug":"/mcp-apps","permalink":"/mcp-ts/docs/mcp-apps","draft":false,"unlisted":false,"editUrl":"https://github.com/zonlabs/mcp-ts/tree/main/docs/docs/mcp-apps.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Adapters","permalink":"/mcp-ts/docs/adapters"},"next":{"title":"API Reference","permalink":"/mcp-ts/docs/api-reference"}}');var r=s(4848),i=s(8453);const o={sidebar_position:6},l="MCP Apps",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Components",id:"components",level:3},{value:"Communication Flow",id:"communication-flow",level:3},{value:"Server-Side Setup",id:"server-side-setup",level:2},{value:"Registering an MCP App Tool",id:"registering-an-mcp-app-tool",level:3},{value:"Serving the App HTML Resource",id:"serving-the-app-html-resource",level:3},{value:"Client-Side Integration",id:"client-side-integration",level:2},{value:"Using McpAppTool Component",id:"using-mcpapptool-component",level:3},{value:"Props",id:"props",level:3},{value:"Using useMcpApp Hook",id:"using-usemcpapp-hook",level:3},{value:"Building an MCP App",id:"building-an-mcp-app",level:2},{value:"App HTML Structure",id:"app-html-structure",level:3},{value:"App API Reference",id:"app-api-reference",level:3},{value:"Receiving Data",id:"receiving-data",level:4},{value:"Calling Server Tools",id:"calling-server-tools",level:4},{value:"Host Context",id:"host-context",level:4},{value:"Resource Preloading",id:"resource-preloading",level:2},{value:"Cache Hierarchy",id:"cache-hierarchy",level:3},{value:"Security",id:"security",level:2},{value:"Iframe Sandbox",id:"iframe-sandbox",level:3},{value:"Restricted Actions",id:"restricted-actions",level:3},{value:"PostMessage Isolation",id:"postmessage-isolation",level:3},{value:"Example: Complete Integration",id:"example-complete-integration",level:2},{value:"Server (MCP Server)",id:"server-mcp-server",level:3},{value:"Client (React)",id:"client-react",level:3},{value:"MCP App (HTML)",id:"mcp-app-html",level:3},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"mcp-apps",children:"MCP Apps"})}),"\n",(0,r.jsx)(n.p,{children:"MCP Apps enable MCP servers to deliver interactive user interfaces to hosts. This standardized pattern allows servers to present visual information and gather complex user input beyond text and structured data."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["When an MCP server exposes a tool with UI metadata, ",(0,r.jsx)(n.code,{children:"@mcp-ts/sdk"})," automatically renders the tool's interface in a sandboxed iframe. The app communicates with the host page through the ",(0,r.jsx)(n.strong,{children:"AppBridge"})," protocol, enabling bidirectional communication for tool execution and messaging."]}),"\n",(0,r.jsx)(n.mermaid,{value:'graph TB\n    subgraph Browser["Browser"]\n        subgraph ReactApp["React App (Host)"]\n            useMcp["useMcp Hook"]\n            SSEClient["SSEClient"]\n            ToolRenderer["ToolRenderer"]\n            McpAppTool["McpAppTool"]\n\n            subgraph Iframe["Sandboxed Iframe"]\n                McpAppUI["MCP App UI"]\n            end\n        end\n    end\n\n    subgraph Server["MCP Server"]\n        Tools["Tools"]\n        Resources["Resources"]\n    end\n\n    useMcp --\x3e SSEClient\n    SSEClient --\x3e|"HTTP/SSE"| Server\n    ToolRenderer --\x3e McpAppTool\n    McpAppTool --\x3e|"AppBridge<br/>(PostMessage)"| McpAppUI\n    McpAppUI --\x3e|"Tool Calls"| SSEClient'}),"\n",(0,r.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Secure Sandboxing"})," - Apps run in iframes with minimal permissions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Resource Preloading"})," - UI resources are cached at tool discovery for instant loading"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bidirectional Communication"})," - Apps can call server tools and receive results"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Theme Support"})," - Host context (theme, platform) passed to apps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dynamic Resizing"})," - Apps can request size changes"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsx)(n.h3,{id:"components",children:"Components"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Component"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"AppHost"})}),(0,r.jsx)(n.td,{children:"Manages iframe lifecycle, sandboxing, and AppBridge connection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"SSEClient"})}),(0,r.jsx)(n.td,{children:"Handles resource preloading and caching for instant UI loading"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"McpAppTool"})}),(0,r.jsx)(n.td,{children:"React component that renders the MCP App iframe"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"useMcpApp"})}),(0,r.jsx)(n.td,{children:"React hook that initializes AppHost for an iframe"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"communication-flow",children:"Communication Flow"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant App as MCP App (iframe)\n    participant Bridge as AppBridge\n    participant Host as AppHost\n    participant SSE as SSEClient\n    participant Server as MCP Server\n\n    App->>Bridge: callServerTool({name, args})\n    Bridge->>Host: oncalltool(params)\n    Host->>SSE: callTool(sessionId, name, args)\n    SSE->>Server: HTTP POST /rpc\n    Server--\x3e>SSE: Tool Result\n    SSE--\x3e>Host: Result\n    Host->>Bridge: sendToolResult(result)\n    Bridge--\x3e>App: ontoolresult(result)"}),"\n",(0,r.jsx)(n.h2,{id:"server-side-setup",children:"Server-Side Setup"}),"\n",(0,r.jsx)(n.h3,{id:"registering-an-mcp-app-tool",children:"Registering an MCP App Tool"}),"\n",(0,r.jsx)(n.p,{children:"Tools with UI metadata automatically trigger MCP App rendering:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";\n\nconst server = new McpServer({ name: "my-server", version: "1.0.0" });\n\n// Register tool with UI metadata\nserver.tool(\n  "interactive-chart",\n  {\n    description: "Display an interactive chart",\n    inputSchema: {\n      type: "object",\n      properties: {\n        data: { type: "array", items: { type: "number" } }\n      }\n    },\n    // UI metadata - triggers MCP App rendering\n    _meta: {\n      ui: {\n        resourceUri: "ui://interactive-chart/index.html",\n        visibility: ["app"]  // Only show in MCP Apps context\n      }\n    }\n  },\n  async ({ data }) => {\n    return {\n      content: [{ type: "text", text: JSON.stringify(data) }]\n    };\n  }\n);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"serving-the-app-html-resource",children:"Serving the App HTML Resource"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// Register the HTML resource\nserver.resource(\n  "ui://interactive-chart/index.html",\n  "ui://interactive-chart/index.html",\n  { mimeType: "text/html" },\n  async () => {\n    const html = await fs.readFile("./chart-app.html", "utf-8");\n    return {\n      contents: [{\n        uri: "ui://interactive-chart/index.html",\n        mimeType: "text/html",\n        text: html\n      }]\n    };\n  }\n);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"client-side-integration",children:"Client-Side Integration"}),"\n",(0,r.jsx)(n.h3,{id:"using-mcpapptool-component",children:"Using McpAppTool Component"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"McpAppTool"})," component handles all the complexity of rendering MCP Apps:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import { McpAppTool } from "@/components/mcp/tools/McpAppTool";\n\nfunction ToolRenderer({ tool, result, status }) {\n  // Extract UI metadata from tool\n  const uiUri = tool._meta?.ui?.resourceUri;\n\n  if (!uiUri) {\n    return <DefaultToolView tool={tool} result={result} />;\n  }\n\n  return (\n    <McpAppTool\n      resourceUri={uiUri}\n      sessionId={sessionId}\n      toolInput={tool.arguments}\n      toolResult={result}\n      toolStatus={status}\n    />\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"props",children:"Props"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Prop"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"resourceUri"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsxs)(n.td,{children:["The ",(0,r.jsx)(n.code,{children:"ui://"})," resource URI for the app"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sessionId"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Active MCP session ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"toolInput"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Tool input arguments to pass to app"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"toolResult"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"unknown"})}),(0,r.jsx)(n.td,{children:"Tool execution result to pass to app"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"toolStatus"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'"executing" | "inProgress" | "complete"'})}),(0,r.jsx)(n.td,{children:"Current tool status"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"using-usemcpapp-hook",children:"Using useMcpApp Hook"}),"\n",(0,r.jsxs)(n.p,{children:["For custom implementations, use the ",(0,r.jsx)(n.code,{children:"useMcpApp"})," hook directly:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'import { useMcpApp } from "@mcp-ts/sdk/client/react";\n\nfunction CustomMcpApp({ client, resourceUri, sessionId }) {\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const { host, error } = useMcpApp(client, iframeRef);\n\n  useEffect(() => {\n    if (host) {\n      host.launch(resourceUri, sessionId);\n    }\n  }, [host, resourceUri, sessionId]);\n\n  if (error) return <div>Error: {error.message}</div>;\n\n  return (\n    <iframe\n      ref={iframeRef}\n      sandbox="allow-scripts allow-forms allow-modals allow-popups allow-downloads"\n      className="w-full h-96"\n    />\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"building-an-mcp-app",children:"Building an MCP App"}),"\n",(0,r.jsx)(n.h3,{id:"app-html-structure",children:"App HTML Structure"}),"\n",(0,r.jsxs)(n.p,{children:["MCP Apps use the ",(0,r.jsx)(n.code,{children:"@modelcontextprotocol/ext-apps"})," package for communication:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n<head>\n  <script type="module">\n    import { useApp } from "@modelcontextprotocol/ext-apps/app";\n\n    const app = useApp({\n      name: "my-chart-app",\n      version: "1.0.0"\n    });\n\n    // Initialize the app\n    await app.initialize();\n\n    // Listen for tool input\n    app.ontoolinput = (params) => {\n      console.log("Received input:", params.arguments);\n      renderChart(params.arguments.data);\n    };\n\n    // Listen for tool results\n    app.ontoolresult = (result) => {\n      console.log("Tool completed:", result);\n    };\n\n    // Call server tools\n    async function fetchMoreData() {\n      const result = await app.callServerTool({\n        name: "fetch-data",\n        arguments: { limit: 100 }\n      });\n      updateChart(result);\n    }\n  <\/script>\n</head>\n<body>\n  <div id="chart-container"></div>\n</body>\n</html>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"app-api-reference",children:"App API Reference"}),"\n",(0,r.jsx)(n.h4,{id:"receiving-data",children:"Receiving Data"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Tool input (arguments passed to the tool)\napp.ontoolinput = (params: { arguments: Record<string, unknown> }) => {\n  // Handle input\n};\n\n// Tool result (after tool execution completes)\napp.ontoolresult = (result: unknown) => {\n  // Handle result\n};\n\n// Tool cancelled\napp.ontoolcancelled = (params: { reason: string }) => {\n  // Handle cancellation\n};\n"})}),"\n",(0,r.jsx)(n.h4,{id:"calling-server-tools",children:"Calling Server Tools"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'const result = await app.callServerTool({\n  name: "tool-name",\n  arguments: { key: "value" }\n});\n'})}),"\n",(0,r.jsx)(n.h4,{id:"host-context",children:"Host Context"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// Get host context (theme, platform, dimensions)\nconst context = app.getHostContext();\n// { theme: "dark", platform: "web", containerDimensions: { maxHeight: 6000 } }\n\n// Request size change\nawait app.requestSizeChange({ height: 500 });\n\n// Request display mode\nawait app.requestDisplayMode("fullscreen"); // or "inline"\n\n// Open external link\nawait app.openLink({ url: "https://example.com" });\n\n// Send message to host\nawait app.sendMessage({ role: "assistant", content: "Hello!" });\n'})}),"\n",(0,r.jsx)(n.h2,{id:"resource-preloading",children:"Resource Preloading"}),"\n",(0,r.jsx)(n.p,{children:"For instant UI loading, resources are preloaded when tools are discovered:"}),"\n",(0,r.jsx)(n.mermaid,{value:"flowchart LR\n    A[Tool Discovery] --\x3e B[SSEClient.preloadToolUiResources]\n    B --\x3e C{Check Cache}\n    C --\x3e|Miss| D[Fetch Resource]\n    C --\x3e|Hit| E[Use Cached]\n    D --\x3e F[Store in Cache]\n    F --\x3e G[Ready for Instant Load]\n    E --\x3e G"}),"\n",(0,r.jsx)(n.h3,{id:"cache-hierarchy",children:"Cache Hierarchy"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SSEClient Cache"})," (fastest) - Built into the SSE client instance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AppHost Local Cache"})," - Instance-level cache for direct AppHost usage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Direct Fetch"})," - Fresh fetch if not cached"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Automatic preloading in SSEClient\nclient.preloadToolUiResources(sessionId, tools);\n\n// Check if resource is cached\nif (client.hasPreloadedResource(uri)) {\n  // Resource ready for instant load\n}\n\n// Get from cache or fetch\nconst resource = await client.getOrFetchResource(sessionId, uri);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,r.jsx)(n.h3,{id:"iframe-sandbox",children:"Iframe Sandbox"}),"\n",(0,r.jsx)(n.p,{children:"MCP Apps run with strict sandbox restrictions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'sandbox="allow-scripts allow-forms allow-same-origin allow-modals allow-popups allow-downloads"\n'})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Permission"}),(0,r.jsx)(n.th,{children:"Purpose"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allow-scripts"})}),(0,r.jsx)(n.td,{children:"JavaScript execution"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allow-forms"})}),(0,r.jsx)(n.td,{children:"Form submissions"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allow-same-origin"})}),(0,r.jsx)(n.td,{children:"Blob URL correctness"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allow-modals"})}),(0,r.jsx)(n.td,{children:"Dialogs and alerts"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allow-popups"})}),(0,r.jsx)(n.td,{children:"Opening links in new windows"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allow-downloads"})}),(0,r.jsx)(n.td,{children:"File downloads"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"restricted-actions",children:"Restricted Actions"}),"\n",(0,r.jsxs)(n.p,{children:["Apps ",(0,r.jsx)(n.strong,{children:"cannot"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Access parent DOM"}),"\n",(0,r.jsx)(n.li,{children:"Navigate parent window"}),"\n",(0,r.jsx)(n.li,{children:"Execute scripts outside sandbox"}),"\n",(0,r.jsx)(n.li,{children:"Access cookies/localStorage (unless same-origin required)"}),"\n",(0,r.jsx)(n.li,{children:"Make arbitrary network requests to different origins"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"postmessage-isolation",children:"PostMessage Isolation"}),"\n",(0,r.jsx)(n.p,{children:"All communication uses structured cloning through PostMessage, preventing direct memory access between host and app."}),"\n",(0,r.jsx)(n.h2,{id:"example-complete-integration",children:"Example: Complete Integration"}),"\n",(0,r.jsx)(n.h3,{id:"server-mcp-server",children:"Server (MCP Server)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'// server.ts\nimport { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";\nimport fs from "fs/promises";\n\nconst server = new McpServer({ name: "demo", version: "1.0.0" });\n\n// Register tool with UI\nserver.tool(\n  "weather-widget",\n  {\n    description: "Interactive weather display",\n    inputSchema: {\n      type: "object",\n      properties: {\n        city: { type: "string" }\n      },\n      required: ["city"]\n    },\n    _meta: {\n      ui: { resourceUri: "ui://weather-widget/index.html" }\n    }\n  },\n  async ({ city }) => {\n    const weather = await fetchWeather(city);\n    return { content: [{ type: "text", text: JSON.stringify(weather) }] };\n  }\n);\n\n// Serve the app HTML\nserver.resource(\n  "ui://weather-widget/index.html",\n  "ui://weather-widget/index.html",\n  { mimeType: "text/html" },\n  async () => ({\n    contents: [{\n      uri: "ui://weather-widget/index.html",\n      mimeType: "text/html",\n      text: await fs.readFile("./weather-widget.html", "utf-8")\n    }]\n  })\n);\n'})}),"\n",(0,r.jsx)(n.h3,{id:"client-react",children:"Client (React)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:'// ToolRenderer.tsx\nimport { McpAppTool } from "./mcp/tools/McpAppTool";\n\nexport function ToolRenderer({ tool, result, status, sessionId }) {\n  const uiUri = tool._meta?.ui?.resourceUri;\n\n  return (\n    <div className="tool-container">\n      <h3>{tool.name}</h3>\n      {uiUri && (\n        <McpAppTool\n          resourceUri={uiUri}\n          sessionId={sessionId}\n          toolInput={tool.arguments}\n          toolResult={result}\n          toolStatus={status}\n        />\n      )}\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"mcp-app-html",children:"MCP App (HTML)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'\x3c!-- weather-widget.html --\x3e\n<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: system-ui; padding: 1rem; }\n    .weather-card { background: #f0f0f0; border-radius: 8px; padding: 1rem; }\n  </style>\n</head>\n<body>\n  <div id="app" class="weather-card">Loading...</div>\n\n  <script type="module">\n    import { useApp } from "@modelcontextprotocol/ext-apps/app";\n\n    const app = useApp({ name: "weather-widget", version: "1.0.0" });\n    await app.initialize();\n\n    app.ontoolresult = (result) => {\n      const data = JSON.parse(result.content[0].text);\n      document.getElementById("app").innerHTML = `\n        <h2>${data.city}</h2>\n        <p>Temperature: ${data.temp}\xb0C</p>\n        <p>Conditions: ${data.conditions}</p>\n      `;\n    };\n  <\/script>\n</body>\n</html>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Keep apps lightweight"})," - Minimize bundle size for fast loading"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handle all states"})," - Loading, error, and success states"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use preloading"})," - Let SSEClient cache resources at discovery time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Respect sandbox"})," - Don't rely on features outside sandbox permissions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Theme awareness"})," - Use host context for consistent theming"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Graceful degradation"})," - Provide fallback if app fails to load"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);