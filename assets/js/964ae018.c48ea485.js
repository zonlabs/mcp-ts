"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[7443],{3588(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"api-reference","title":"API Reference","description":"Complete API documentation for mcp-ts.","source":"@site/docs/api-reference.md","sourceDirName":".","slug":"/api-reference","permalink":"/mcp-ts/docs/api-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/zonlabs/mcp-redis/tree/main/docs/docs/api-reference.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Vue.js Integration","permalink":"/mcp-ts/docs/vue"}}');var r=s(4848),t=s(8453);const c={sidebar_position:5},o="API Reference",l={},d=[{value:"Server-Side API",id:"server-side-api",level:2},{value:"<code>createNextMcpHandler(options)</code>",id:"createnextmcphandleroptions",level:3},{value:"<code>createSSEHandler(options)</code>",id:"createssehandleroptions",level:3},{value:"<code>MCPClient</code>",id:"mcpclient",level:3},{value:"Methods",id:"methods",level:4},{value:"<code>MultiSessionClient</code>",id:"multisessionclient",level:3},{value:"Methods",id:"methods-1",level:4},{value:"Storage Backend API",id:"storage-backend-api",level:2},{value:"<code>storage</code>",id:"storage",level:3},{value:"Configuration",id:"configuration",level:4},{value:"Storage Methods",id:"storage-methods",level:3},{value:"Custom Storage Backends",id:"custom-storage-backends",level:3},{value:"Client-Side API",id:"client-side-api",level:2},{value:"<code>useMcp(options)</code>",id:"usemcpoptions",level:3},{value:"<code>SSEClient</code>",id:"sseclient",level:3},{value:"Methods",id:"methods-2",level:4},{value:"Types",id:"types",level:2},{value:"Connection Types",id:"connection-types",level:3},{value:"Tool Types",id:"tool-types",level:3},{value:"Session Types",id:"session-types",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"UnauthorizedError",id:"unauthorizederror",level:3},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"api-reference",children:"API Reference"})}),"\n",(0,r.jsx)(n.p,{children:"Complete API documentation for mcp-ts."}),"\n",(0,r.jsx)(n.h2,{id:"server-side-api",children:"Server-Side API"}),"\n",(0,r.jsx)(n.h3,{id:"createnextmcphandleroptions",children:(0,r.jsx)(n.code,{children:"createNextMcpHandler(options)"})}),"\n",(0,r.jsx)(n.p,{children:"Creates handlers for Next.js App Router API routes."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { createNextMcpHandler } from '@mcp-ts/redis/server';\n\nconst { GET, POST } = createNextMcpHandler({\n  getIdentity: (request) => string,\n  getAuthToken?: (request) => string | null,\n  authenticate?: (identity, token) => Promise<boolean>,\n  heartbeatInterval?: number,\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Options:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getIdentity"})," - Function to extract identity from request (required)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getAuthToken"})," - Function to extract auth token from request (optional)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"authenticate"})," - Custom authentication logic (optional)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"heartbeatInterval"})," - SSE heartbeat interval in ms (default: 30000)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"clientDefaults"})," - Static OAuth client metadata (optional)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getClientMetadata"})," - Dynamic OAuth metadata getter (optional, overrides defaults)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," ",(0,r.jsx)(n.code,{children:"{ GET, POST }"})," - HTTP method handlers"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"createssehandleroptions",children:(0,r.jsx)(n.code,{children:"createSSEHandler(options)"})}),"\n",(0,r.jsx)(n.p,{children:"Creates an SSE handler for standard Node.js/Express applications."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { createSSEHandler } from '@mcp-ts/redis/server';\n\nconst handler = createSSEHandler({\n  identity: string,\n  onAuth?: (identity) => Promise<boolean>,\n  heartbeatInterval?: number,\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Options:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"identity"})," - User/Client identifier (required)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"onAuth"})," - Authentication callback (optional)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"heartbeatInterval"})," - Heartbeat interval in ms (default: 30000)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"clientDefaults"})," - Static OAuth client metadata (optional)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getClientMetadata"})," - Dynamic OAuth metadata getter (optional)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," Request handler function"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"mcpclient",children:(0,r.jsx)(n.code,{children:"MCPClient"})}),"\n",(0,r.jsx)(n.p,{children:"Direct MCP client class for server-side operations."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { MCPClient } from '@mcp-ts/redis/server';\n\nconst client = new MCPClient({\n  identity: string,\n  sessionId: string,\n  serverId?: string,\n  serverUrl?: string,\n  callbackUrl?: string,\n  transportType?: 'sse' | 'streamable_http',\n  onRedirect?: (authUrl: string) => void,\n  // OAuth Metadata\n  clientName?: string,\n  clientUri?: string,\n  logoUri?: string,\n  policyUri?: string,\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"connect(): Promise<void>"})})}),"\n",(0,r.jsxs)(n.p,{children:["Connect to the MCP server. May throw ",(0,r.jsx)(n.code,{children:"UnauthorizedError"})," if OAuth is required."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await client.connect();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"disconnect(): Promise<void>"})})}),"\n",(0,r.jsx)(n.p,{children:"Disconnect from the MCP server."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await client.disconnect();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"listTools(): Promise<ListToolsResult>"})})}),"\n",(0,r.jsx)(n.p,{children:"List available tools from the MCP server."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const { tools } = await client.listTools();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"callTool(name: string, args: object): Promise<CallToolResult>"})})}),"\n",(0,r.jsx)(n.p,{children:"Call a tool with arguments."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await client.callTool('get_weather', {\n  location: 'San Francisco',\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"getAITools(): Promise<ToolSet>"})})}),"\n",(0,r.jsx)(n.p,{children:"Get all MCP tools and convert them to AI SDK compatible tools."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const tools = await client.getAITools();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"listPrompts(): Promise<ListPromptsResult>"})})}),"\n",(0,r.jsx)(n.p,{children:"List available prompts."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const { prompts } = await client.listPrompts();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"getPrompt(name: string, args?: object): Promise<GetPromptResult>"})})}),"\n",(0,r.jsx)(n.p,{children:"Get a prompt with optional arguments."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const prompt = await client.getPrompt('code-review', {\n  language: 'typescript',\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"listResources(): Promise<ListResourcesResult>"})})}),"\n",(0,r.jsx)(n.p,{children:"List available resources."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const { resources } = await client.listResources();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"readResource(uri: string): Promise<ReadResourceResult>"})})}),"\n",(0,r.jsx)(n.p,{children:"Read a specific resource by URI."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const resource = await client.readResource('file:///path/to/file');\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"finishAuth(code: string): Promise<void>"})})}),"\n",(0,r.jsx)(n.p,{children:"Complete OAuth authorization with authorization code."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await client.finishAuth(authCode);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"multisessionclient",children:(0,r.jsx)(n.code,{children:"MultiSessionClient"})}),"\n",(0,r.jsx)(n.p,{children:"Manages multiple MCP connections for a single user identity, allowing aggregation of tools from all connected servers."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { MultiSessionClient } from '@mcp-ts/redis/server';\n\nconst mcp = new MultiSessionClient(identity, {\n  timeout: 15000,\n  maxRetries: 2,\n  retryDelay: 1000,\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Options:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"timeout"})," - Connection timeout in milliseconds (default: 15000)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"maxRetries"})," - Maximum number of retry attempts for each session (default: 2)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"retryDelay"})," - Delay between retries in milliseconds (default: 1000)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"methods-1",children:"Methods"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"connect(): Promise<void>"})})}),"\n",(0,r.jsx)(n.p,{children:"Connects to all active sessions for the user. Skips sessions that fail to connect after retries, but logs errors."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await mcp.connect();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"getAITools(): Promise<ToolSet>"})})}),"\n",(0,r.jsx)(n.p,{children:"Aggregates AI tools (compatible with AI SDK) from all connected clients."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const tools = await mcp.getAITools();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"disconnect(): void"})})}),"\n",(0,r.jsx)(n.p,{children:"Disconnects all active clients and clears the internal client list."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"mcp.disconnect();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"storage-backend-api",children:"Storage Backend API"}),"\n",(0,r.jsx)(n.h3,{id:"storage",children:(0,r.jsx)(n.code,{children:"storage"})}),"\n",(0,r.jsx)(n.p,{children:"Global storage instance that automatically selects the appropriate backend based on environment configuration."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { storage } from '@mcp-ts/redis/server';\n"})}),"\n",(0,r.jsx)(n.h4,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.p,{children:"The storage backend is selected automatically:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Redis (Production)\nMCP_TS_STORAGE_TYPE=redis\nREDIS_URL=redis://localhost:6379\n\n# File System (Development)\nMCP_TS_STORAGE_TYPE=file\nMCP_TS_STORAGE_FILE=./sessions.json\n\n# In-Memory (Testing - Default)\nMCP_TS_STORAGE_TYPE=memory\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"storage-methods",children:"Storage Methods"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"generateSessionId(): string"})})}),"\n",(0,r.jsx)(n.p,{children:"Generate a unique session ID."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const sessionId = storage.generateSessionId();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"createSession(session: SessionData): Promise<void>"})})}),"\n",(0,r.jsx)(n.p,{children:"Create a new session. Throws if session already exists."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await storage.createSession({\n  sessionId: 'abc123',\n  identity: 'user-123',\n  serverId: 'server-id',\n  serverName: 'My Server',\n  serverUrl: 'https://mcp.example.com',\n  callbackUrl: 'https://myapp.com/callback',\n  transportType: 'sse',\n  active: true,\n  createdAt: Date.now(),\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"updateSession(identity: string, sessionId: string, data: Partial<SessionData>): Promise<void>"})})}),"\n",(0,r.jsx)(n.p,{children:"Update an existing session with partial data. Throws if session doesn't exist."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await storage.updateSession('user-123', 'abc123', {\n  active: false,\n  tokens: {\n    access_token: 'new-token',\n    token_type: 'Bearer',\n  },\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"getSession(identity: string, sessionId: string): Promise<SessionData | null>"})})}),"\n",(0,r.jsx)(n.p,{children:"Retrieve session data."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const session = await storage.getSession('user-123', 'abc123');\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"getIdentitySessionsData(identity: string): Promise<SessionData[]>"})})}),"\n",(0,r.jsx)(n.p,{children:"Get all session data for an identity."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const sessions = await storage.getIdentitySessionsData('user-123');\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"getIdentityMcpSessions(identity: string): Promise<string[]>"})})}),"\n",(0,r.jsx)(n.p,{children:"Get all session IDs for an identity."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const sessionIds = await storage.getIdentityMcpSessions('user-123');\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"removeSession(identity: string, sessionId: string): Promise<void>"})})}),"\n",(0,r.jsx)(n.p,{children:"Delete a session."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await storage.removeSession('user-123', 'abc123');\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"getAllSessionIds(): Promise<string[]>"})})}),"\n",(0,r.jsx)(n.p,{children:"Get all session IDs across all users (admin operation)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const allSessions = await storage.getAllSessionIds();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"clearAll(): Promise<void>"})})}),"\n",(0,r.jsx)(n.p,{children:"Clear all sessions (admin operation)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await storage.clearAll();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"cleanupExpiredSessions(): Promise<void>"})})}),"\n",(0,r.jsx)(n.p,{children:"Clean up expired sessions (Redis only, no-op for others)."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await storage.cleanupExpiredSessions();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"disconnect(): Promise<void>"})})}),"\n",(0,r.jsx)(n.p,{children:"Disconnect from storage backend."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await storage.disconnect();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"custom-storage-backends",children:"Custom Storage Backends"}),"\n",(0,r.jsx)(n.p,{children:"You can also use specific storage backends directly:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { \n  RedisStorageBackend,\n  MemoryStorageBackend,\n  FileStorageBackend \n} from '@mcp-ts/redis/server';\nimport { Redis } from 'ioredis';\n\n// Redis\nconst redis = new Redis(process.env.REDIS_URL);\nconst redisStorage = new RedisStorageBackend(redis);\n\n// File System\nconst fileStorage = new FileStorageBackend({ path: './sessions.json' });\nawait fileStorage.init();\n\n// In-Memory\nconst memoryStorage = new MemoryStorageBackend();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"client-side-api",children:"Client-Side API"}),"\n",(0,r.jsx)(n.h3,{id:"usemcpoptions",children:(0,r.jsx)(n.code,{children:"useMcp(options)"})}),"\n",(0,r.jsx)(n.p,{children:"React hook for managing MCP connections."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { useMcp } from '@mcp-ts/redis/client';\n\nconst {\n  connections,\n  status,\n  isInitializing,\n  connect,\n  disconnect,\n  refresh,\n  connectSSE,\n  disconnectSSE,\n  finishAuth,\n  callTool,\n  listTools,\n  listPrompts,\n  getPrompt,\n  listResources,\n  readResource,\n  getConnection,\n  getConnectionByServerId,\n  isServerConnected,\n  getTools,\n} = useMcp({\n  url: string,\n  identity: string,\n  authToken?: string,\n  autoConnect?: boolean,\n  autoInitialize?: boolean,\n  onConnectionEvent?: (event) => void,\n  onLog?: (level, message, metadata) => void,\n});\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Options:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"})," - SSE endpoint URL (required)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"identity"})," - User/Client identifier (required)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"authToken"})," - Authentication token (optional)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"autoConnect"})," - Auto-connect SSE on mount (default: true)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"autoInitialize"})," - Auto-load sessions on mount (default: true)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"onConnectionEvent"})," - Connection event handler (optional)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"onLog"})," - Debug log handler (optional)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"})," Object with state and methods"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"sseclient",children:(0,r.jsx)(n.code,{children:"SSEClient"})}),"\n",(0,r.jsx)(n.p,{children:"Lower-level SSE client for custom implementations."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { SSEClient } from '@mcp-ts/redis/client';\n\nconst client = new SSEClient({\n  url: string,\n  identity: string,\n  authToken?: string,\n  onConnectionEvent?: (event) => void,\n  onStatusChange?: (status) => void,\n  onLog?: (level, message, metadata) => void,\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"methods-2",children:"Methods"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"connect(): void"})})}),"\n",(0,r.jsx)(n.p,{children:"Connect to the SSE endpoint."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"client.connect();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"disconnect(): void"})})}),"\n",(0,r.jsx)(n.p,{children:"Disconnect from the SSE endpoint."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"client.disconnect();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"getSessions(): Promise<Session[]>"})})}),"\n",(0,r.jsx)(n.p,{children:"Get all user sessions."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const sessions = await client.getSessions();\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"connectToServer(config): Promise<{ sessionId: string }>"})})}),"\n",(0,r.jsx)(n.p,{children:"Connect to an MCP server."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const { sessionId } = await client.connectToServer({\n  serverId: 'server-id',\n  serverName: 'My Server',\n  serverUrl: 'https://mcp.example.com',\n  callbackUrl: window.location.origin + '/callback',\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"disconnectFromServer(sessionId: string): Promise<void>"})})}),"\n",(0,r.jsx)(n.p,{children:"Disconnect from an MCP server."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"await client.disconnectFromServer(sessionId);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"callTool(sessionId, name, args): Promise<any>"})})}),"\n",(0,r.jsx)(n.p,{children:"Call a tool on a connected server."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const result = await client.callTool(sessionId, 'tool_name', {\n  arg1: 'value',\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"listTools(sessionId): Promise<Tool[]>"})})}),"\n",(0,r.jsx)(n.p,{children:"List tools for a session."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const tools = await client.listTools(sessionId);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"types",children:"Types"}),"\n",(0,r.jsx)(n.h3,{id:"connection-types",children:"Connection Types"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import type {\n  McpConnectionState,\n  McpConnectionEvent,\n} from '@mcp-ts/redis/shared';\n\ntype McpConnectionState =\n  | 'DISCONNECTED'\n  | 'CONNECTING'\n  | 'AUTHENTICATING'\n  | 'AUTHENTICATED'\n  | 'DISCOVERING'\n  | 'CONNECTED'\n  | 'VALIDATING'\n  | 'RECONNECTING'\n  | 'FAILED';\n\ntype McpConnectionEvent =\n  | { type: 'state_changed'; sessionId: string; state: McpConnectionState; ... }\n  | { type: 'tools_discovered'; sessionId: string; tools: Tool[]; ... }\n  | { type: 'auth_required'; sessionId: string; authUrl: string; ... }\n  | { type: 'error'; sessionId: string; error: string; ... }\n  | { type: 'disconnected'; sessionId: string; reason?: string; ... }\n  | { type: 'progress'; sessionId: string; message: string; ... };\n"})}),"\n",(0,r.jsx)(n.h3,{id:"tool-types",children:"Tool Types"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import type { ToolInfo } from '@mcp-ts/redis/shared';\n\ninterface ToolInfo {\n  name: string;\n  description?: string;\n  inputSchema: {\n    type: 'object';\n    properties?: Record<string, any>;\n    required?: string[];\n  };\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"session-types",children:"Session Types"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface SessionData {\n  sessionId: string;\n  identity?: string;\n  serverId?: string;\n  serverName?: string;\n  serverUrl: string;\n  callbackUrl: string;\n  transportType: 'sse' | 'streamable_http';\n  active: boolean;\n  createdAt: number;\n  headers?: Record<string, string>;\n  // OAuth data\n  tokens?: OAuthTokens;\n  clientInformation?: OAuthClientInformation;\n  codeVerifier?: string;\n  clientId?: string;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.h3,{id:"unauthorizederror",children:"UnauthorizedError"}),"\n",(0,r.jsx)(n.p,{children:"Thrown when OAuth authorization is required."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { UnauthorizedError } from '@mcp-ts/redis/server';\n\ntry {\n  await client.connect();\n} catch (error) {\n  if (error instanceof UnauthorizedError) {\n    console.log('Redirect to:', error.authUrl);\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/zonlabs/mcp-ts/tree/main/examples",children:"Examples"})," - Practical code examples"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/zonlabs/mcp-ts",children:"GitHub Repository"})," - Source code"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);